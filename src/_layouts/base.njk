{%- set absolutePageUrl %}{{ page.url | htmlBaseUrl(site.url) }}{% endset %}
<!DOCTYPE html>
<html lang="en-us"
      class="text-gray-950 bg-gray-50 dark:text-gray-50 dark:bg-gray-950">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title or site.title }}</title>
    <meta name="description" content="{{ description or site.description }}">
    <meta name="author" content="{{ author or site.author }}">
    <meta name="generator" content="{{ eleventy.generator }}">
    <link rel="canonical" href="{{ absolutePageUrl }}">
    <meta property="og:title"
          content="{%- if title -%}{{ title }} - {{ site.title }}{%- else -%}{{ site.title }}{%- endif -%}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:url" content="{{ absolutePageUrl }}">
    <meta property="og:locale" content="en_us">
    <link rel="alternate"
          href="/blog/feed/atom.xml"
          type="application/atom+xml"
          title="{{ site.title }}">
    <link rel="preload"
          href="/static/fonts/BricolageGrotesque.woff2"
          as="font"
          type="font/woff2"
          crossorigin>
    <link rel="preload"
          href="/static/fonts/InterVariable.woff2"
          as="font"
          type="font/woff2"
          crossorigin>
    <link rel="preload"
          href="/static/fonts/InterVariable-Italic.woff2"
          as="font"
          type="font/woff2"
          crossorigin>
    {%- getBundle "html", "preload" %}
    {# djlint: off #}
    <style>{% getBundle "css" %}</style>
    {# djlint: on #}
    {%- css %}
      {% include "../_static/css/fonts.css" %}
    {% endcss %}
    <link rel="stylesheet" href="/static/css/style.css">
    <script data-goatcounter="https://joshthomasdev.goatcounter.com/count"
            async
            src="//gc.zgo.at/count.js"></script>
    <link href="mailto:josh@joshthomas.dev" rel="me">
    <link href="https://github.com/joshuadavidthomas" rel="me">
    <link href="https://joshthomas.dev/@josh" rel="me">
    <link href="https://social.joshthomas.dev/@josh" rel="me">
  </head>
  <body class="px-2">
    <header class="flex justify-between items-baseline w-full">
      <div>
        <h1 class="text-2xl font-bold font-brico">
          <a href="/">Josh Thomas</a>
        </h1>
        {% set navPages = collections.all | eleventyNavigation %}
        <nav class="flex gap-4 items-center text-sm" aria-labelledby="site-nav">
          <h2 id="site-nav" class="sr-only">Site navigation</h2>
          {%- for entry in navPages %}
            <a href="{{ entry.url }}"
               class="uppercase hover:text-blue-500 hover:underline underline-offset-4 decoration-1{% if page.url | isActiveUrl(entry.url) %} text-blue-800 dark:text-blue-300 font-semibold underline{% endif %}">
              {{ entry.title }}
            </a>
          {%- endfor %}
        </nav>
      </div>
      <nav class="flex items-center gap-2" aria-labelledby="social-nav">
        <h2 id="social-nav" class="sr-only">Social media</h2>
        {%- for item in site.social %}
          {%- set socialId = item.title | slugify -%}
          <a href="{{ item.url }}"
             target="_blank"
             rel="noopener noreferrer"
             aria-labelledby="{{ socialId }}-link">
            <span id="{{ socialId }}-link" class="sr-only">{{ item.title }}</span>
            {{ item.icon | safe }}
          </a>
        {%- endfor %}
      </nav>
    </header>
    <main id="skip"{%- if class.main -%}class="{{ class.main }}"{%- endif -%}>
      {{ content | safe }}
    </main>
    {% getBundle "fontawesome" %}
    {%- js %}
      {% include "../_static/js/goatcounter.js" %}
    {% endjs %}
    <script type="module" src="{% getBundleFileUrl "js" %}"></script>
    {% getBundle "js", "modules" %}
  </body>
</html>
